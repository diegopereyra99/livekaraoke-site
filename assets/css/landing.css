/* Header / Hero */
header.hero{
  position: relative;
  /* Full viewport height; svh handles mobile browser UI chrome */
  min-height: 100vh;
  min-height: 100svh;
  display:grid; place-items:center; isolation:isolate; overflow:hidden;
}
.hero::before{
  content:""; position:absolute; inset:0;
  /* Default: mobile/tablet */
  background: url('../photos/hero/hero-800.webp') center/cover no-repeat;
  background-attachment: fixed;
  /* Keep the image as-is (slight boost + optional blur). Adjust as needed. */
  filter: brightness(0.6) saturate(1.05) blur(8px);
  transform: scale(1.03);
}

/* Swap hero image for larger viewports */
@media (min-width: 900px){
  .hero::before{ background-image: url('../photos/hero/hero-1280.webp'); }
}
@media (min-width: 1400px){
  .hero::before{ background-image: url('../photos/hero/hero-1920.webp'); }
}
.hero::after{ content:""; position:absolute; inset:0; background: none; pointer-events: none; }

.hero-inner{ position:relative; z-index:1; width:100%; }
.hero-card{
  max-width: 900px; margin-inline:auto; padding: clamp(20px, 3vw, 28px);
  /* Remove the dark glass panel for a full-photo hero */
  background: transparent;
  backdrop-filter: none;
  border: 0;
  border-radius: var(--radius);
  box-shadow: none;
}

.hero-cta{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:center; margin-top: .6rem; }

/* Logo sizing in hero */
.logo-img{ display:block; width: clamp(260px, 55vw, 720px); height:auto; margin-inline:auto; 
  /* Fallback glow if SVG filters are unsupported */
  filter: drop-shadow(0 0 12px var(--glow-1)) drop-shadow(0 0 22px var(--glow-2));
}

/* Steps sizing refinements for this page */
#how .step{ min-height: 300px; }
.step .step-cta{ position:relative; z-index:1; margin-top: 8px; }
.step .step-icon{ position:relative; z-index:1; font-size: 28px; margin-top: 6px; line-height: 1; }

/* What section: single-column hero with background carousel */
/* Unify stacking context at #what so backdrop-filter can sample carousel pixels */
#what{ isolation:isolate; }
#what .what-hero{ position:relative; /* removed isolation to keep same stacking context as #what */ min-height: clamp(360px, 58vh, 640px); border-radius: 16px; overflow:hidden; display:grid; }
#what .what-hero > *{ grid-area: 1 / 1; }
#what .what-hero .carousel{ position:absolute; top:0; right:0; bottom:0; left:0; z-index:0; }
#what .what-hero .carousel .track{
  height:100%;
  grid-auto-columns: 100%;
  padding-bottom: 0; /* remove bottom gap */
  overflow-x: hidden; /* hide manual scroll */
  pointer-events: none; /* disable manual interaction */
}
#what .what-hero .slide{ border:0; border-radius:0; background: transparent; }
#what .what-hero .slide img{ width:100%; height:100%; object-fit: cover; filter: saturate(1.05) contrast(1.02); }

/* Overlay card for text */
#what .what-overlay{ position:absolute; top:0; right:0; bottom:0; left:0; z-index:10; display:grid; place-items:center; height:100%; padding: clamp(16px, 3vw, 32px); }
#what .what-overlay.reveal{ opacity:1; transform:none !important; }
#what .what-overlay.reveal.in{ animation:none !important; }
#what .what-overlay .stack{ gap: clamp(16px, 2.2vw, 22px); }
#what .what-overlay p{
  max-width: 900px;
  margin-inline: auto;
  padding: clamp(12px, 2.2vw, 20px) clamp(14px, 2.4vw, 24px);
  /* Card background and clipping; blur is applied on an internal layer */
  position: relative;
  z-index: 0; /* establish stacking context; keep pseudo-element behind content */
  background: transparent;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  font-size: clamp(18px, 1.1vw, 21px);
  line-height: 1.8;
  color: #eef3f9;
  text-align: center;
}
/* Dedicated blur+tint layer for WebKit reliability */
#what .what-overlay p::before{
  content: "";
  position: absolute; inset: 0;
  z-index: -1; /* sit below text, above carousel */
  background: rgba(0,0,0,.58);
  -webkit-backdrop-filter: blur(10px) saturate(1.06);
  backdrop-filter: blur(10px) saturate(1.06);
  border-radius: inherit;
  pointer-events: none;
}
/* Desktop: make overlay box and text larger */
@media (min-width: 900px){
  #what .what-hero{ min-height: clamp(520px, 66vh, 820px); }
  #what .what-overlay .stack{ gap: 24px; }
  #what .what-overlay p{
    max-width: 900px; /* restore desktop width */
    /* restore original vertical padding */
    padding: clamp(28px, 3.2vw, 44px) clamp(14px, 2.4vw, 24px);
    font-size: clamp(20px, 1.4vw, 28px);
    line-height: 1.9;
    /* Stronger glass effect handled by the pseudo-layer */
  }
  #what .what-overlay p::before{
    background: rgba(0,0,0,.5);
    -webkit-backdrop-filter: blur(16px) saturate(1.08);
    backdrop-filter: blur(16px) saturate(1.08);
  }
}
/* Centered text on mobile too */
@media (max-width: 900px){ #what .what-overlay p{ text-align: center; } }

/* Carousel */
.carousel{ display:grid; gap: 10px; }
.carousel .track{
  display:grid; grid-auto-flow: column; grid-auto-columns: 100%; gap: 12px;
  overflow-x:auto; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch;
  padding-bottom: 8px; scrollbar-width: none;
}
.carousel .track::-webkit-scrollbar{ display:none; }
.slide{ margin:0; scroll-snap-align: start; position:relative; border-radius: 14px; overflow:hidden; border:1px solid rgba(255,255,255,.08); background:#0e0e16; }
.slide img{ width:100%; height: clamp(240px, 42vw, 420px); object-fit:cover; display:block; }
.carousel .dots{ display:flex; gap:8px; justify-content:center; }
.carousel .dot{ width:10px; height:10px; border-radius:999px; background: rgba(255,255,255,.4); border:0; padding:0; cursor:pointer; }
.carousel .dot.active{ background: linear-gradient(135deg, var(--accent-start), var(--accent-end)); box-shadow: 0 0 0 2px rgba(255,255,255,.25); }

/* Hide dots for What section */
#what .carousel .dots{ display:none; }

/* Gallery */
.gallery{ display:grid; gap:14px; grid-template-columns: repeat(3, 1fr); }
/* Desktop: increase How It Works step height */
@media (min-width: 900px){
  #how .step{ min-height: 400px; }
}

/* Larger text inside How steps */
#how .step b{ font-size: clamp(1.2rem, 2.2vw, 1.5rem); }
#how .step p{ font-size: clamp(1rem, 1.6vw, 1.15rem); line-height: 1.75; }

/* Contact section tweaks */
#contact .contact-lead{ max-width: 960px; margin: 8px 0 0; font-size: clamp(20px, 2.6vw, 24px); }
#contact .contact-cta{ margin-top: clamp(16px, 2.5vw, 28px); }
@media (max-width: 900px){ .gallery{ grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 560px){ .gallery{ grid-template-columns: 1fr; } }
.gallery figure{ position:relative; margin:0; overflow:hidden; border-radius: 14px; border:1px solid rgba(255,255,255,.08); background: #0e0e16; }
.gallery img{ width:100%; height: 280px; object-fit:cover; transition: transform .4s ease, filter .4s ease; will-change: transform; }
.gallery figure:hover img{ transform: scale(1.06); filter: saturate(1.15) contrast(1.05); }
.gallery figcaption{ position:absolute; inset:auto 8px 8px 8px; padding:4px 8px; font-size:.8rem; color:#e9eef5; background: rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.08); border-radius: 999px; }

/* Mobile & touch tweaks for this page */
@media (max-width: 900px){
  .hero::before{ background-attachment: scroll; }
}
@media (max-width: 560px){
  .hero-card{ padding: 16px; }
  .subtitle{ font-size: 16px; }
  .hero-cta .btn{ width: 100%; }
  .gallery img{ height: 220px; }
  .step{ min-height: 200px; }
}
